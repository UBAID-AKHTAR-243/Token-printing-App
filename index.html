<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sweet & Ice Cream Token Counter</title>
  <style>
    /* ===== Token App Styles ===== */
    body {
      font-family: Arial, sans-serif;
      background: #fdf6f0;
      text-align: center;
      margin-top: 60px;
    }
    h1 {
      color: #ff4081;
      font-size: 25px;
    }
    select, input, button {
      padding: 12px 20px;
      font-size: 16px;
      border-radius: 8px;
      margin: 10px;
    }
    input {
      width: 100px;
      text-align: center;
    }
    button {
      background: #ff4081;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background: #e73370;
    }
    .token-box {
      margin-top: 25px;
      font-size: 20px;
      color: #333;
      background: #fff;
      padding: 15px;
      border-radius: 10px;
      display: inline-block;
      min-width: 320px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.2);
      white-space: pre-line;
    }

    #total-display {
      font-size: 22px;
      color: #1a8917;
      margin-top: 15px;
    }

    /* ===== Print styling ===== */
    @media print {
      body * {
        visibility: hidden;
      }
      #printable-token, #printable-token * {
        visibility: visible;
      }
      #printable-token {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        text-align: center;
        font-size: 18px;
      }
    }

    /* ===== Tiny Rotating Circle Styles (50% smaller) ===== */
    .circle-container {
      position: fixed;
      top: 10px;
      left: 10px;
      width: 40px;   /* smaller */
      height: 40px;
      overflow: visible;
      z-index: 1000;
    }

    .circle {
      color: white;
      text-align: center;
      font-size: 5px;
      background-color: navy;
      width: 100%;
      height: 100%;
      border: 3px solid #3498db;
      border-radius: 50%;
      position: relative;
      animation: rotateBorder 5s linear infinite;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      box-shadow: 0 0 6px rgba(0,0,0,0.3);
    }

    .ball {
      position: absolute;
      width: 4px;
      height: 4px;
      background-color: #e74c3c;
      border-radius: 50%;
      top: 0;
      left: 50%;
      margin-top: -2px;
      margin-left: -2px;
      animation: rotateBall 5s linear infinite;
    }

    @keyframes rotateBorder {
      to {
        transform: rotate(360deg);
      }
    }

    @keyframes rotateBall {
      to {
        transform: rotate(360deg);
      }
    }
  </style>
</head>
<body>

  <!-- Tiny Rotating Circle Animation -->
  <div class="circle-container">
    <div class="circle">
       <br> ÿßŸÑÿ¨ÿØ€åÿØ
      <br> ÿ®€å⁄©ÿ±ÿ≤
      <div class="ball"></div>
    </div>
  </div>

  <!-- Main Token Counter App -->
  <h1>ÿßŸÑÿ¨ÿØ€åÿØ ÿ≥Ÿà€åŸπÿ≥ ÿß€åŸÜ⁄à ÿ®€å⁄©ÿ±ÿ≤</h1>

  <!-- Ice Cream Section -->
  <div>
      <select id="icecream-choice" onchange="calculateTotal()">
          <option value="">Select Ice Cream üç¶</option>
          <option value="IceCream 2 Scoop" data-price="150">Ice Cream 2-Scoop = Rs.150</option>
          <option value="IceCream 3 Scoop" data-price="220">Ice Cream 3-Scoop = Rs.220</option>
          <option value="IceCream 4 Scoop" data-price="300">Ice Cream 4-Scoop = Rs.300</option>
      </select>
      <input type="number" id="icecream-qty" placeholder="Qty" min="1" oninput="calculateTotal()" autofocus>
  </div>

  <!-- Sweet Section -->
  <div>
      <select id="sweet-choice" onchange="calculateTotal()">
          <option value="">Select Sweet üç∞ üç∞ </option>
          <option value="Barfi" data-price="1000">Barfi = Rs.1000/kg</option>
          <option value="Gulab Jamun" data-price="900">Gulab Jamun = Rs.900/kg</option>
          <option value="Rasgulla" data-price="800">Rasgulla = Rs.800/kg</option>
      </select>
      <input type="number" id="sweet-qty" placeholder="Qty (kg)" min="1" oninput="calculateTotal()">
  </div>

  <div id="total-display">Total Amount: Rs. 0</div>

  <button onclick="generateToken()">üñ®Ô∏è Print Token</button>

  <div id="token-box" class="token-box">
      Thank you! Visit again.  
      €ÅŸàŸÖ ⁄à€åŸÑŸàÿ±€å ⁄©€åŸÑ€ì ÿØÿ±ÿ¨ ÿ∞€åŸÑ ŸÜŸÖÿ®ÿ± Ÿæÿ± ÿ±ÿßÿ®ÿ∑€Å ⁄©ÿ±€å⁄∫: 03007680770
  </div>

  <!-- Hidden printable token -->
  <div id="printable-token" style="display:none;">
      <h2>ÿßŸÑÿ¨ÿØ€åÿØ ÿ≥Ÿà€åŸπÿ≥ ÿß€åŸÜ⁄à ÿ®€å⁄©ÿ±ÿ≤</h2>
      <hr>
      <p id="print-content"></p>
      <hr>
      <p>Thank you! Visit again.  
      €ÅŸàŸÖ ⁄à€åŸÑŸàÿ±€å ⁄©€åŸÑ€ì ÿØÿ±ÿ¨ ÿ∞€åŸÑ ŸÜŸÖÿ®ÿ± Ÿæÿ± ÿ±ÿßÿ®ÿ∑€Å ⁄©ÿ±€å⁄∫: 03007680770 üç®</p>
  </div>

  <script>
    function calculateTotal() {
      const iceSelect = document.getElementById("icecream-choice");
      const sweetSelect = document.getElementById("sweet-choice");
      const iceQty = parseFloat(document.getElementById("icecream-qty").value) || 0;
      const sweetQty = parseFloat(document.getElementById("sweet-qty").value) || 0;

      const icePrice = iceSelect.options[iceSelect.selectedIndex]?.dataset.price ? parseFloat(iceSelect.options[iceSelect.selectedIndex].dataset.price) : 0;
      const sweetPrice = sweetSelect.options[sweetSelect.selectedIndex]?.dataset.price ? parseFloat(sweetSelect.options[sweetSelect.selectedIndex].dataset.price) : 0;

      const total = (icePrice * iceQty) + (sweetPrice * sweetQty);
      document.getElementById("total-display").innerText = `Total  Amount: Rs. ${total}`;
    }

    async function generateToken() {
      const iceSelect = document.getElementById("icecream-choice");
      const sweetSelect = document.getElementById("sweet-choice");
      const iceChoice = iceSelect.value;
      const sweetChoice = sweetSelect.value;
      const iceQty = parseFloat(document.getElementById("icecream-qty").value) || 0;
      const sweetQty = parseFloat(document.getElementById("sweet-qty").value) || 0;

      if (!iceChoice && !sweetChoice) {
        alert("‚ö†Ô∏è Please select at least one item.");
        return;
      }
      if ((iceChoice && iceQty <= 0) || (sweetChoice && sweetQty <= 0)) {
        alert("‚ö†Ô∏è Please enter valid quantity.");
        return;
      }

      let orders = [];
      if (iceChoice && iceQty > 0) orders.push({ choice: iceChoice, quantity: iceQty });
      if (sweetChoice && sweetQty > 0) orders.push({ choice: sweetChoice, quantity: sweetQty });

      const data = {
        token: Math.floor(Math.random() * 1000),
        orders: orders.map(o => ({
          choice: o.choice,
          quantity: o.quantity,
          price_each: o.choice.includes("IceCream") ? (o.choice.includes("2") ? 150 : o.choice.includes("3") ? 220 : 300) :
                      (o.choice.includes("Barfi") ? 1000 : o.choice.includes("Gulab") ? 900 : 800),
          total_price: o.quantity * (o.choice.includes("IceCream") ? (o.choice.includes("2") ? 150 : o.choice.includes("3") ? 220 : 300) :
                      (o.choice.includes("Barfi") ? 1000 : o.choice.includes("Gulab") ? 900 : 800))
        }))
      };

      let tokenText = "‚ö°Token Number: " + data.token + "\n";
      let total = 0;

      data.orders.forEach((item, i) => {
        tokenText +=
          `\nItem ${i + 1}: ${item.choice}` +
          `\nQuantity: ${item.quantity}` +
          `\nPrice Each: Rs.${item.price_each}` +
          `\nSubtotal: Rs.${item.total_price}\n`;
        total += item.total_price;
      });
      tokenText += "\n------------------\nTotal  Amount: Rs." + total;

      document.getElementById("token-box").innerText = tokenText;
      document.getElementById("total-display").innerText = `Total Payable Amount: Rs. ${total}`;

      document.getElementById("print-content").innerText = tokenText;
      document.getElementById("printable-token").style.display = "block";
      window.print();

      document.getElementById("icecream-choice").value = "";
      document.getElementById("sweet-choice").value = "";
      document.getElementById("icecream-qty").value = "";
      document.getElementById("sweet-qty").value = "";
      document.getElementById("total-display").innerText = "Total Amount: Rs. 0";
      document.getElementById("icecream-qty").focus();
    }
  </script>
</body>
</html>
